
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script>


      

    </script>
  </head>
  <body>
    <a-scene 
    mindar-image="imageTargetSrc: ./targets.mind; filterMinCF:0.015; filterBeta:85; missTolerance: 12;" 
    vr-mode-ui="enabled: false" 
    device-orientation-permission-ui="enabled: false" 
    showStats: true; 
    embedded 
    color-space="sRGB"
     renderer="colorManagement: true, physicallyCorrectLights">
      <a-assets>
        <a-asset-item id="carModel" src="2021_volkswagen_polo_plus/scene.gltf"></a-asset-item>
        <video id="WebMShowreel" src="ShowreelQ.webm" loop="false"></video>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false" cursor="fuse: false; rayOrigin: mouse;" raycaster="far: ${customFields.libVersion}; objects: .clickable"></a-camera>


      <a-entity mindar-image-target="targetIndex: 0" id="imageTarget">
        <!-- Video with Animations -->
        <a-video 
          id="videoPlayer" 
          src="#WebMShowreel" 
          position="0 0 0.1" 
          scale="0.5 0.5 0.5" 
          rotation="0 0 90"
          animation__position="property: position; to: 0 0 0.1; dur: 2000; easing: easeInOutQuad; loop: false; dir: alternate; startEvents: startAnimation"
          animation__scale="property: scale; to: 1 1 1; dur: 2000; easing: easeInOutQuad; loop: false; dir: alternate; startEvents: startAnimation"
          width = "2,4"
          height = "1">
        </a-video>


        <a-plane
         id="button"
         class="clickable"
         position="0 1.3 0.2"
         rotation="0 0 90"
         scale="0.4 0.4 0.4"
         color="blue"
         opacity="0.8"
         material="shader: flat"
         text="value: Visit Website; align: center; color: white; width: 3.5"
        ></a-plane>




      </a-entity>
      <a-entity cursor="rayOrigin: mouse"></a-entity>
    </a-scene>

    <script>



      AFRAME.registerComponent('video-control', {
        init: function () {
          const sceneEl = document.querySelector('a-scene');
          const arSystem = sceneEl.systems["mindar-image-system"];
          const videoEl = document.querySelector('#WebMShowreel');
          const videoPlayer = document.querySelector('#videoPlayer');
          const targetEl = this.el;

          // Debugging: Log when target is found or lost
          targetEl.addEventListener('targetFound', () => {
            console.log('Target Found');
            videoEl.play(); // Start video playback
            videoPlayer.emit('startAnimation'); // Trigger animations
          });

          targetEl.addEventListener('targetLost', () => {
            console.log('Target Lost');
            videoEl.pause(); // Pause video playback
          });
        }
      });

      // Attach the video-control component to the image target
      document.querySelector('#imageTarget').setAttribute('video-control', '');


      // detect click event
const examplePlane = document.querySelector('#button');
examplePlane.addEventListener("click", event => {
  console.log("plane click");
  window.open("https://www.elsterkind.de/kontakt/", "_blank");
});


    </script>
  </body>
</html>



          <!--
        //Background Plane 
        <a-plane color="blue" opacity="0.5" position="0 0 0" height="0.552" width="1" rotation="0 0 90"></a-plane>

        // GLTF Model 
        <a-gltf-model 
          rotation="90 0 0" 
          position="0 0 0.2" 
          scale="0.25 0.25 0.25" 
          src="#carModel"
          animation="property: position; to: 0 0.01 0.05; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate">
        </a-gltf-model>
      -->


<!--

<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
  </head>



  <body>

    <a-scene 
    mindar-image="imageTargetSrc: ./targets.mind; filterMinCF:0.001; filterBeta:100; missTolerance: 10;" 
    vr-mode-ui="enabled: false" 
    device-orientation-permission-ui="enabled: false" 
    showStats: true; embedded color-space="sRGB" 
    renderer="colorManagement: true, physicallyCorrectLights">

        <a-assets>
            <a-asset-item id="carModel" src="2021_volkswagen_polo_plus/scene.gltf"></a-asset-item>
            <video id="showreel" src="showreel.mp4" autoplay  loop="false"></video>

        </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>


      
      <a-entity mindar-image-target="targetIndex: 0">
        <a-video 
        id="videoPlayer" 
        src="#showreel" 
        position="0 0 0.1" 
        scale="0.5 1 0.5" 
        rotation="0 0 -90" 
        animation="property: position; to: 0 0.6 0.2; dur: 1000; easing: easeInOutQuad; loop: false; dir: alternate" 
        animation="property: scale; to: 1 1 1; dur: 1000; easing: easeInOutQuad; loop: false; dir: alternate">
        </a-video>
        <a-plane color="blue" opaciy="0.5" position="0 0 0" height="0.552" width="1" rotation="0 0 0"></a-plane>

        <a-gltf-model rotation="0 90 90 " position="0 0 0.2" scale="0.25 0.25 0.25" src="#carModel"
          animation="property: position; to: 0 0.01 0.01; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate">

      </a-entity>
    </a-scene>


    <script>
        AFRAME.registerComponent('video-control', {
          init: function () {
            const videoEl = document.querySelector('#showreel');
            const targetEl = this.el;
  
            // Play video when the target is found
            targetEl.addEventListener('targetFound', () => {
              videoEl.play();
            });
  
            // Pause video when the target is lost
            targetEl.addEventListener('targetLost', () => {
              videoEl.pause();
            });
          }
        });
  
        // Add the video-control component to the image target
        document.querySelector('[mindar-image-target]').setAttribute('video-control', '');
      </script>
  </body>
</html>

-->


<!--
  <body>
    <a-scene mindar-image="imageTargetSrc: targets.mind;" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
      <a-assets>
	<img id="card" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.png" />
	<a-asset-item id="avatarModel" src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/softmind/scene.gltf"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-plane src="#card" position="0 0 0" height="0.552" width="1" rotation="0 0 0"></a-plane>
        <a-gltf-model rotation="0 0 0 " position="0 0 0.1" scale="0.005 0.005 0.005" src="#avatarModel"
          animation="property: position; to: 0 0.1 0.1; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate"
        >
      </a-entity>
    </a-scene>
  </body>
  -->
</html>